(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{36:function(e,t,n){e.exports=n(65)},59:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(32),o=n.n(s),c=n(3),u=n.n(c),l=n(8),i=n(12),p=n(13),m=n(15),g=n(14),h=n(16),d=n(9),E=n.n(d),v=(n(59),n(6)),f=function(e){var t=e.logoutUser;return e.isUserLoggedIn?r.a.createElement("nav",null,r.a.createElement(v.b,{to:"/"},"Home")," ",r.a.createElement(v.b,{to:"/users"},"Users")," ",r.a.createElement("button",{onClick:t},"Log-Out")):r.a.createElement("nav",null,r.a.createElement(v.b,{to:"/"},"Home")," ",r.a.createElement(v.b,{to:"/login"},"Log-In")," ",r.a.createElement(v.b,{to:"/signup"},"Sign-Up")," ")},b=n(10),U=n(18),O=function(e){var t=e.username,n=e.password,a=e.handleChange,s=e.loginUser;return r.a.createElement("div",null,r.a.createElement("h3",null," Log-In "),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s()}},r.a.createElement("input",{type:"text",name:"username",value:t,placeholder:"username",onChange:a}),r.a.createElement("input",{type:"password",name:"password",value:n,placeholder:"***",onChange:a}),r.a.createElement("input",{type:"submit",value:"log-in"})))},j=function(e){var t=e.username,n=e.password,a=e.handleChange,s=e.signupUser;return r.a.createElement("div",null,r.a.createElement("h3",null," Sign-Up "),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s()}},r.a.createElement("input",{type:"text",name:"username",value:t,placeholder:"Username",onChange:a}),r.a.createElement("input",{type:"password",name:"password",value:n,placeholder:"***",onChange:a}),r.a.createElement("input",{type:"submit",value:"Signup"})))},w=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={username:"",password_digest:""},n.handleChange=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(U.a)({},t,a))},n.signupUser=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.post("/auth/signup",n.state);case 3:n.logInUser(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("ERROR",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),n.loginUser=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.post("/auth/login",n.state);case 3:t=e.sent,a=t.data,n.props.setUser(a.payload),n.props.history.push("/users"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("ERROR",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),n.renderLoginForm=function(){var e=n.state,t=e.username,a=e.password;return r.a.createElement(O,{handleChange:n.handleChange,username:t,password:a,loginUser:n.loginUser})},n.renderSignupForm=function(){var e=n.state,t=e.username,a=e.password;return r.a.createElement(j,{handleChange:n.handleChange,username:t,password:a,signupUser:n.signupUser})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.isUserLoggedIn?r.a.createElement("div",null,r.a.createElement("h2",null,"AuthContainer"),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/login",render:this.renderLoginForm}),r.a.createElement(b.b,{path:"/signup",render:this.renderSignupForm}))):r.a.createElement(b.a,{to:"/"})}}]),t}(r.a.Component),y=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome"))},k=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(m.a)(this,Object(g.a)(t).call(this))).state={users:[]},e}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/users");case 3:t=e.sent,n=t.data,this.setState({users:n.payload}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("ERROR",e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),r.a.createElement("ul",null,this.state.users.map((function(e,t){return r.a.createElement("li",{className:"user-item",key:t},r.a.createElement("p",null,r.a.createElement("span",null,"id: "),e.id),r.a.createElement("p",null,r.a.createElement("span",null,"user: "),e.username))}))))}}]),t}(a.Component),L=n(35),C=function(e){var t=e.isUserLoggedIn,n=e.component,a=Object(L.a)({},e);return t?r.a.createElement(b.b,Object.assign({},a,{component:n})):r.a.createElement(b.a,{to:"/login"})},I=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(s)))).state={user:null,isUserLoggedIn:!1},n.setUser=function(e){n.setState({user:e,isUserLoggedIn:!0})},n.checkUserLoggedIn=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/auth/isUserLoggedIn");case 3:t=e.sent,a=t.data,n.setUser(a.payload),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("ERROR",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),n.logoutUser=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("/auth/logout");case 3:n.setState({user:null,isUserLoggedIn:!1}),n.props.history.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),n.renderAuthContainer=function(e){return r.a.createElement(w,Object.assign({setUser:n.setUser,isUserLoggedIn:n.state.isUserLoggedIn},e))},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.checkUserLoggedIn()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(f,{logoutUser:this.logoutUser,isUserLoggedIn:this.state.isUserLoggedIn}),r.a.createElement(b.d,null,r.a.createElement(b.b,{path:"/login",render:this.renderAuthContainer}),r.a.createElement(b.b,{path:"/signup",render:this.renderAuthContainer}),r.a.createElement(C,{path:"/users",component:k,isUserLoggedIn:this.state.isUserLoggedIn}),r.a.createElement(b.b,{path:"/",component:y})))}}]),t}(r.a.Component),x=Object(b.g)(I);o.a.render(r.a.createElement(v.a,null,r.a.createElement(x,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.c8e3ab1c.chunk.js.map